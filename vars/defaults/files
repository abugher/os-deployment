#!/bin/bash

remove_files=(
  '/boot/cmdline.txt'
  '/etc/init.d/dhcpcd'
  '/etc/init.d/resize2fs_once'
  '/etc/init/oem-config.conf'
  '/etc/nv-oem-config.conf'
  '/etc/nv/nvfirstboot'
  '/etc/profile.d/armbian-check-first-login-reboot.sh'
  '/etc/profile.d/armbian-check-first-login.sh'
  '/etc/rc3.d/S01resize2fs_once'
  '/etc/ssh/ssh_host_*_key*'
  '/etc/systemd/multi-user.target.wants/nvfb-early.service'
  '/etc/systemd/multi-user.target.wants/nvfb.service'
  '/etc/systemd/network/99-default.link'
  '/etc/systemd/nv-oem-config-post.sh'
  '/etc/systemd/nv-oem-config.sh'
  '/etc/systemd/nvfb-early.sh'
  '/etc/systemd/system/default.target.wants/avahi-daemon.service'
  '/etc/systemd/system/default.target.wants/dhcpcd.service'
  '/etc/systemd/system/default.target.wants/nfs-client.target'
  '/etc/systemd/system/default.target.wants/raspberrypi-net-mods.service'
  '/etc/systemd/system/default.target.wants/regenerate_ssh_host_keys.service'
  '/etc/systemd/system/default.target.wants/remote-fs.target'
  '/etc/systemd/system/default.target.wants/ssh.service'
  '/etc/systemd/system/default.target.wants/triggerhappy.service'
  '/etc/systemd/system/multi-user.target.wants/NetworkManager.service'
  '/etc/systemd/system/multi-user.target.wants/armbian-firstrun-config.service'
  '/etc/systemd/system/nv-oem-config.target'
  '/etc/systemd/system/nv-oem-config.target.wants/nv-oem-config.service'
  '/etc/systemd/system/nv-oem-config.target.wants/nvfb-early.service'
  '/etc/systemd/system/nv.service'
  '/etc/systemd/system/nvfb-early.service'
  '/etc/systemd/system/nvfb.service'
  '/lib/systemd/system/NetworkManager.service'
  '/lib/systemd/system/apply_noobs_os_config.service'
  '/lib/systemd/system/armbian-firstrun-config.service'
  '/lib/systemd/system/armbian-firstrun.service'
  '/lib/systemd/system/armbian-resize-filesystem.service'
  '/lib/systemd/system/dhcpcd.service'
  '/lib/systemd/system/nv-oem-config-debconf@.service'
  '/lib/systemd/system/nv-oem-config-gui.service'
  '/lib/systemd/system/nv-oem-config.service'
  '/lib/systemd/system/raspberrypi-net-mods.service'
  '/lib/systemd/system/regenerate_ssh_host_keys.service'
  '/usr/bin/raspi-config'
  '/usr/lib/armbian/armbian-firstrun'
  '/usr/lib/armbian/armbian-firstrun-config'
  '/var/lib/systemd/deb-systemd-helper-enabled/multi-user.target.wants/NetworkManager.service'
  '/var/lib/systemd/deb-systemd-helper-enabled/multi-user.target.wants/regenerate_ssh_host_keys.service'
)

# Directories paths for null links, below.  (Might be better to derive these on the fly from null_link_files.)
create_directories=(
  '/etc/init.d/'
  '/etc/systemd/network/'
  '/etc/systemd/system/default.target.wants/'
  '/etc/systemd/system/multi-user.target.wants/'
  '/lib/systemd/system/'
  '/usr/bin/'
  '/usr/lib/armbian/'
  '/usr/local/bin/'
  '/etc/ssh/'
  '/etc/systemd/system/default.target.wants'
  '/root/.ssh'
)

# Disable undesired services.  Each of these should also be in remove_files.  (Might be better to automatically combine the lists at time of use.)
null_link_files=(
  '/etc/init.d/dhcpcd'
  '/etc/systemd/multi-user.target.wants/nvfb-early.service'
  '/etc/systemd/multi-user.target.wants/nvfb.service'
  '/etc/systemd/network/99-default.link'
  '/etc/systemd/nv-oem-config-post.sh'
  '/etc/systemd/nv-oem-config.sh'
  '/etc/systemd/nvfb-early.sh'
  '/etc/systemd/system/default.target.wants/avahi-daemon.service'
  '/etc/systemd/system/default.target.wants/dhcpcd.service'
  '/etc/systemd/system/default.target.wants/nfs-client.target'
  '/etc/systemd/system/default.target.wants/raspberrypi-net-mods.service'
  '/etc/systemd/system/default.target.wants/regenerate_ssh_host_keys.service'
  '/etc/systemd/system/default.target.wants/remote-fs.target'
  '/etc/systemd/system/default.target.wants/triggerhappy.service'
  '/etc/systemd/system/multi-user.target.wants/NetworkManager.service'
  '/etc/systemd/system/multi-user.target.wants/armbian-firstrun-config.service'
  '/etc/systemd/system/nv-oem-config.target'
  '/etc/systemd/system/nv-oem-config.target.wants/nv-oem-config.service'
  '/etc/systemd/system/nv-oem-config.target.wants/nvfb-early.service'
  '/etc/systemd/system/nv.service'
  '/etc/systemd/system/nvfb-early.service'
  '/etc/systemd/system/nvfb.service'
  '/lib/systemd/system/NetworkManager.service'
  '/lib/systemd/system/apply_noobs_os_config.service'
  '/lib/systemd/system/armbian-firstrun-config.service'
  '/lib/systemd/system/armbian-firstrun.service'
  '/lib/systemd/system/armbian-resize-filesystem.service'
  '/lib/systemd/system/dhcpcd.service'
  '/lib/systemd/system/nv-oem-config-debconf@.service'
  '/lib/systemd/system/nv-oem-config-gui.service'
  '/lib/systemd/system/nv-oem-config.service'
  '/lib/systemd/system/raspberrypi-net-mods.service'
  '/lib/systemd/system/regenerate_ssh_host_keys.service'
  '/usr/lib/armbian/armbian-firstrun'
  '/usr/lib/armbian/armbian-firstrun-config'
  '/usr/local/bin/raspi-config'
  '/var/lib/systemd/deb-systemd-helper-enabled/multi-user.target.wants/regenerate_ssh_host_keys.service'
)
